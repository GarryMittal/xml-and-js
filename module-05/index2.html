<!DOCTYPE html>
<html lang="en">

<body>
    <ol id="students"></ol>

    <p id="text"></p>
    <script>

        const xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {


                displayData(this.responseXML);


            }
        };

        xhr.open("GET", "cards.xml", true);
        xhr.send();


        const parseCard = (card) =>{
            const number = card.getElementsByTagName('name')[0].childNodes[0].nodeValue;
            const type = card.getElementsByTagName('type')[0].childNodes[0].nodeValue;
            const currency = card.getElementsByTagName('currency')[0].childNodes[0].nodeValue;
            const balance = card.getElementsByTagName('balance')[0].childNodes[0].nodeValue;

            return {number,type,currency,balance};
            
        };

        const stringToNode = value =>{
            const template = document.createElement(`template`);
            const html = value.trim();
            template.innerHTML = html;
            return template.content.firstChild;

        };

        const createCard = (parsedCard )=> {
        const content = `
        <li>
            <article>
            <p>${parsedCard.type}</p>
            <h2>${parsedCard.number}</h2>
            <div>
                ${parsedCard.balance} ${parsedCard.currency}
            </div>
            </article>

        </li>

        `;
        
        };

        const displayData = (xmlDoc) => {

            const listElement = document.getElementById("list");
            const cards = xmlDoc.getElementsByTagName('record');
            for (let index = 0; index < cards.length; index++) {
                const card = cards[index];
                const parsedCard = parseCard(card);
                const cardElement = createCard(parsedCard);
                list.appendChild(cardElement);
            }



        };


        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(text,'text/xml');




    </script>
</body>

</html>